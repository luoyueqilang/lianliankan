var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),mj;!function(t){function e(t,e,i){return(t<<8)+(e<<4)+i}function i(t){return(240&t)>>4}function o(t){return 15&t}var n;!function(t){t[t.ONE=1]="ONE",t[t.TWO=2]="TWO",t[t.THREE=3]="THREE",t[t.FOUR=4]="FOUR",t[t.FIVE=5]="FIVE"}(n=t.EFloorStatus||(t.EFloorStatus={}));var r;!function(t){t[t.TIAO=0]="TIAO",t[t.TONG=1]="TONG",t[t.WANG=2]="WANG",t[t.WIND=3]="WIND"}(r=t.EMJType||(t.EMJType={})),t.C_VALUE_CONF=(h={},h[1]=(s={},s[n.ONE]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0],[0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0],[0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0],[0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0],[0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],s[n.TWO]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,1,0,1,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,1,0,1,0,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],s[n.THREE]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],s[n.FOUR]=[],s[n.FIVE]=[],s),h[2]=(l={},l[n.ONE]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],[0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0],[0,1,0,1,0,1,0,1,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],[0,0,1,0,0,0,1,0,0,1,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,1,0,0,0,1,0,0,1,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0],[0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],[0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],l[n.TWO]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],[0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0],[0,1,0,1,0,1,0,1,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],[0,0,1,0,0,0,1,0,0,1,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,1,0,0,0,1,0,0,1,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0],[0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],[0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],l[n.THREE]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],[0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0],[0,1,0,1,0,1,0,1,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],[0,0,1,0,0,0,1,0,0,1,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,1,0,0,0,1,0,0,1,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0],[0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],[0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],l[n.FOUR]=[],l[n.FIVE]=[],l),h[3]=(c={},c[n.ONE]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],c[n.TWO]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,1,0,1,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,1,0,1,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],c[n.THREE]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,1,0,1,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,1,0,1,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],c[n.FOUR]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,1,0,1,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,1,0,1,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],c[n.FIVE]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],c),h),t.C_VALUE=(u={},u[1]=(p={},p[r.TIAO]={weightVec:[2,2,2,0,2,2,2,2,2]},p[r.TONG]={weightVec:[2,2,2,2,2,2,0,2,2]},p[r.WANG]={weightVec:[2,2,2,0,2,2,2,2,2]},p[r.WIND]={weightVec:[2,2,2,2,2,2,2]},p),u[2]=(d={},d[r.TIAO]={weightVec:[4,4,4,4,4,4,4,4,4]},d[r.TONG]={weightVec:[4,4,4,4,4,4,4,4,4]},d[r.WANG]={weightVec:[4,4,4,4,4,4,4,4,4]},d[r.WIND]={weightVec:[6,4,6,4,6,6,4]},d),u[3]=(g={},g[r.TIAO]={weightVec:[6,6,6,6,6,6,6,6,6]},g[r.TONG]={weightVec:[6,6,6,6,6,6,6,6,6]},g[r.WANG]={weightVec:[6,6,6,6,6,6,6,6,6]},g[r.WIND]={weightVec:[6,6,6,6,6,6,4]},g),u);var a=function(i){function o(){return i.call(this)||this}return __extends(o,i),o.prototype.init=function(t){this.view=t,this._valueVec=this.getValue(),this._valueVec.sort(function(){return Math.random()-.5})},o.prototype.onStart=function(){this.view.gameStart(this._valueVec)},o.prototype.getValue=function(){this._valueVec=[];for(var i in t.C_VALUE[Main_round])for(var o=t.C_VALUE[Main_round][i],n=o.weightVec,r=0;r<n.length;r++)if(n[r])for(var a=0;a<n[r];a++){var h=e(a,parseInt(i),r+1);this._valueVec.push(h)}return this._valueVec},o}(egret.DisplayObjectContainer);t.DataEntry=a,__reflect(a.prototype,"mj.DataEntry",["mj.IDataEntry"]),t.getMjValue=e,t.getType=i,t.getWeight=o;var h,s,l,c,u,p,d,g}(mj||(mj={}));var mj;!function(t){function e(e){for(var i=[],o=0;o<e.length;o++)1!=e[o].bMask&&i.push(e[o]);for(var n=i.length,r=0;n>r;r++)for(var a=r+1;n>a;a++)if(t.getWeight(i[r].value)==t.getWeight(i[a].value)&&t.getType(i[r].value)==t.getType(i[a].value))return!1;return!0}function i(e,i,o){for(var n=[],r=0;r<i.length;r++)1!=i[r].bMask&&n.push(i[r]);var a=n.length;t:for(var h=0;a>h;h++)for(var s=h+1;a>s;s++)if(t.getWeight(n[h].value)==t.getWeight(n[s].value)&&t.getType(n[h].value)==t.getType(n[s].value)){n[h].bLight=!0,n[s].bLight=!0,o.clickVec[0]=n[h],o.clickVec[1]=n[s];break t}setTimeout(function(){o.clearMahjong()},800)}function o(e,i){for(var o=[],n=0;n<i.length;n++)1!=i[n].bMask&&o.push(i[n]);for(var r=o.length,a=0;r>a;a++){var h=1,s=void 0;if(1!=o[a].bLight)for(var l=a+1;r>l;l++)t.getWeight(o[a].value)==t.getWeight(o[l].value)&&t.getType(o[a].value)==t.getType(o[l].value)&&(o[a].bLight=!0,o[l].bLight=!0,s=l,h++);h%2!=0&&h>2&&(o[s].bLight=!1)}}var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(t){this.view=t},e.prototype.maskJudge=function(t){for(var e=this.view.floorLength,i=t.position.floor,o=t.position.col,n=t.position.row,r=0>o-2?0:o-2,a=o+2>20?20:o+2,h=o-1;o+1>=h;h++)for(var s=n-1;n+1>=s;s++)if(e>i){if(this.view.bMahJong(this.view.floorMap[i+1][h][s]))return this.view.floorMap[i][o][n].bMask=!0,!0;if(this.view.bMahJong(this.view.floorMap[i][r][s]))for(var l=n-1;n+1>=l;l++)if(this.view.bMahJong(this.view.floorMap[i][a][l]))return this.view.floorMap[i][o][n].bMask=!0,!0}else if(this.view.bMahJong(this.view.floorMap[i][r][s]))for(var l=n-1;n+1>=l;l++)if(this.view.bMahJong(this.view.floorMap[i][a][l]))return this.view.floorMap[i][o][n].bMask=!0,!0;return!1},e.prototype.getRound=function(t,e,i){for(var o=[],n=e-1;e+1>=n;n++)for(var r=i-1;i+1>=r;r++)this.view.bMahJong(this.view.floorMap[t][n][r])&&o.push(this.view.floorMap[t][n][r]);return o},e.prototype.getSide=function(t,e,i){for(var o=[],n=0>e-2?0:e-2,r=e+2>20?20:e+2,a=n;r>=a;a+=2)for(var h=i-1;i+1>=h;h++)a!=e&&this.view.bMahJong(this.view.floorMap[t][a][h])&&o.push(this.view.floorMap[t][a][h]);return o},e.prototype.lightJudge=function(t){var e=t.position.floor,i=t.position.col,o=t.position.row,n=[],r=[];if(e>1){n=this.getRound(e-1,i,o);for(var a=0;a<n.length;a++){var h=this.maskJudge(n[a]);0==h&&(n[a].bMask=!1)}}r=this.getSide(e,i,o);for(var a=0;a<r.length;a++){var h=this.maskJudge(r[a]);0==h&&(r[a].bMask=!1)}},e}(egret.DisplayObjectContainer);t.MahLogic=n,__reflect(n.prototype,"mj.MahLogic",["mj.IMahLogic"]),t.isDead=e,t.onTip=i,t.onStrongTip=o}(mj||(mj={}));var mj;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="HallSkin",e.addWatch(),e}return __extends(e,t),e.prototype.addWatch=function(){var t=this;this._rectPlay.touchEnabled=!0,this._midPlay.touchEnabled=!0,this._highPlay.touchEnabled=!0,this._rectPlay.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Main_round=1,main.readyView(),t.parent.removeChild(t)},this),this._midPlay.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Main_round=2,main.readyView(),t.parent.removeChild(t)},this),this._highPlay.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Main_round=3,main.readyView(),t.parent.removeChild(t)},this)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.Component);t.HallView=e,__reflect(e.prototype,"mj.HallView",["eui.UIComponent","egret.DisplayObject"])}(mj||(mj={}));var mj;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="ReadyViewSkin",e._myReadyStatus=!1,e._btnReady.touchEnabled=!0,e.readyInfo.text="",e.addWatch(),e}return __extends(e,t),e.prototype.addWatch=function(){this._btnReady.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStatus,this),this.btn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this)},e.prototype.changeStatus=function(t){this._myReadyStatus=!this._myReadyStatus,this._myReadyStatus?(this._imgMyReadyStatus.visible=!0,this._btnReady.source="mj_ready_cancel_png",this.gameReady()):(this._imgMyReadyStatus.visible=!1,this._btnReady.source="mj_ready_ready_png",this.pauseGame())},e.prototype.onBack=function(){this.btn_back.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this),clearInterval(this.timer1),this.parent.removeChild(this),main.toHall()},e.prototype.gameReady=function(){this._myReadyStatus&&this.timeFunc()},e.prototype.pauseGame=function(){this._myReadyStatus||(this.readyInfo.visible=!1,clearInterval(this.timer1))},e.prototype.timeFunc=function(){var t=this,e=3;this.readyInfo.text="",this.readyInfo.visible=!0,this.timer1=setInterval(function(){t.readyInfo.scaleX=.1,t.readyInfo.scaleY=.1,t.readyInfo.alpha=.5,e>0?t.readyInfo.text=""+e:0==e?t.readyInfo.text="GO":(clearInterval(t.timer1),t._btnReady.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.changeStatus,t),t.parent.removeChild(t),main.addToStage()),egret.Tween.get(t.readyInfo).to({scaleX:1.5,scaleY:1.5,alpha:1},900).call(function(){e--})},1e3)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.Component);t.ReadyView=e,__reflect(e.prototype,"mj.ReadyView",["eui.UIComponent","egret.DisplayObject"])}(mj||(mj={}));var mj;!function(t){t.C_TABLE_STYLE={width:600,height:1e3,x:300,y:0};var e=function(e){function i(){var t=e.call(this)||this;return t.floorLength=0,t._recentCount=0,t._totalCount=0,t.conf={1:250,2:750,3:1250,4:1750,5:2250},t.majMap=[],t.floorMap=[],t.clickVec=[],t}return __extends(i,e),i.prototype.gameStart=function(t){this.valueVec=t,this.initMahjong(),this.progressBar()},i.prototype.init=function(e,i){this.dataEntry=e,this.mahLogic=i,this.initBg(),this.topUI=new t.UITop(this),this.addChild(this.topUI),this.botUI=new t.UIBottom(this),this.addChild(this.botUI),this.addWatch()},i.prototype.initBg=function(){var e=RES.getRes("mj_bg_png"),i=new egret.Bitmap(e);i.width=t.C_TABLE_STYLE.width,i.height=t.C_TABLE_STYLE.height,this.addChild(i)},i.prototype.initMahjong=function(){this.valueVec.sort(function(){return Math.random()-.5});var e=this.valueVec.concat();for(var i in t.C_VALUE_CONF[Main_round])t.C_VALUE_CONF[Main_round][i].length&&this.floorLength++;for(var o=1;o<=this.floorLength;o++){for(var n=[],r=0;r<t.C_VALUE_CONF[Main_round][o].length;r++){for(var a=[],h=0;h<t.C_VALUE_CONF[Main_round][o][0].length;h++)if(t.C_VALUE_CONF[Main_round][o][r][h]){this._recentCount++,this._totalCount++;var s={floor:o,col:r,row:h},l={width:t.C_MJ_STYLE.width,height:t.C_MJ_STYLE.height},c=new t.MahjongView;c.init(s,l);var u=40+t.C_MJ_POSITION.offsetX*r+t.C_MJ_POSITION.offX*(o-1),p=250+t.C_MJ_POSITION.offsetY*h-t.C_MJ_POSITION.offY*(o-1);if(this.addToTable(c,u,p),a[h]=c,this.addChild(c),0!=e.length){var d=e.pop();c.toDisplayValue(d)}this.majMap.push(c)}else a[h]=0;n[r]=a}this.floorMap[o]=n}this.initMask(),this.deadFlash()},i.prototype.initMask=function(){for(var t=1;t<=this.floorLength;t++)for(var e=0;e<this.floorMap[t].length;e++)for(var i=0;i<this.floorMap[t][e].length;i++)this.bMahJong(this.floorMap[t][e][i])&&this.mahLogic.maskJudge(this.floorMap[t][e][i])},i.prototype.addToTable=function(t,e,i){var o=0;return o=this.conf[t.position.floor],t.x=e,t.y=i-1e3,setTimeout(function(){egret.Tween.get(t).to({x:e,y:i},500)},o),Promise.resolve()},i.prototype.addWatch=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},i.prototype.onTouch=function(t){this.bMahJong(t.target)&&(this.clickVec[0]?t.target!=this.clickVec[0]&&(this.clickVec.push(t.target),this.canClear()?(this.clearMahjong(),this.deadFlash()):(this.clickVec[1].bLight=!0,this.clickVec[0].bLight=!1,this.clickVec.pop(),this.clickVec[0]=t.target)):(this.clickVec.push(t.target),t.target.bLight=!0))},i.prototype.bMahJong=function(e){return e?e instanceof t.MahjongView:!1},i.prototype.stopFlash=function(){for(var t=0,e=0;e<this.majMap.length;e++)1==this.majMap[e].bLight&&t++;return t%2==0&&t>=2?!0:!1},i.prototype.clearMahjong=function(){var t=this;this._recentCount-=2,this.progressBar(),0==this._recentCount&&alert("恭喜您已经完成");var e=new egret.GlowFilter(3394815,.8,10,10,2,3,!1,!1),i=this.clickVec[0],o=this.clickVec[1];i.bg.filters=[e],o.bg.filters=[e],i.bLight=!1,o.bLight=!1,this.setChildIndex(i,500),this.setChildIndex(o,501);var n=Math.ceil((i.x+o.x)/2),r=Math.ceil((i.y+o.y)/2);return o.x<=n?(egret.Tween.get(o).to({x:n-25,y:r},250).to({alpha:.2,y:1e3},1200).call(function(){t.removeChild(o),t.touchEnabled=!0,t.touchChildren=!0}),egret.Tween.get(i).to({x:n+25,y:r},250).to({alpha:.2,y:1e3},1200).call(function(){t.removeChild(i),t.touchEnabled=!0,t.touchChildren=!0})):(egret.Tween.get(o).to({x:n+25,y:r},250).to({alpha:.2,y:1e3},1200).call(function(){t.removeChild(o),t.touchEnabled=!0,t.touchChildren=!0}),egret.Tween.get(i).to({x:n-25,y:r},250).to({alpha:.2,y:1e3},1200).call(function(){t.removeChild(i),t.touchEnabled=!0,t.touchChildren=!0})),i.touchEnabled=!1,o.touchEnabled=!1,this.majMap.splice(this.majMap.indexOf(i),1),this.majMap.splice(this.majMap.indexOf(o),1),this.valueVec.splice(this.valueVec.indexOf(i.value),1),this.valueVec.splice(this.valueVec.indexOf(o.value),1),this.floorMap[i.position.floor][i.position.col][i.position.row]=0,this.floorMap[o.position.floor][o.position.col][o.position.row]=0,this.mahLogic.lightJudge(this.clickVec[0]),this.mahLogic.lightJudge(this.clickVec[1]),this.clickVec=[],Promise.resolve()},i.prototype.canClear=function(){return t.getWeight(this.clickVec[0].value)==t.getWeight(this.clickVec[1].value)&&t.getType(this.clickVec[0].value)==t.getType(this.clickVec[1].value)?!0:!1},i.prototype.reflash=function(e,i){for(var o,n=1,r=[],a=e.concat(),h=0,s=0;s<i.length;s++)1!=i[s].bMask&&(h>0&&i[s].position.floor>=r[0].position.floor?r.unshift(i[s]):r.push(i[s])),h=r.length;var l=Math.floor(Math.random()*h);if(r.length>=2){o=r[0].value;for(var c=0;c<i.length;c++)if(i[c].value!=r[0].value&&1==i[c].bMask&&t.getWeight(i[c].value)==t.getWeight(o)&&t.getType(i[c].value)==t.getType(o)){a.splice(a.indexOf(r[0].value),1),a.splice(a.indexOf(i[c].value),1);var u=i[c].value;0==l&&(l=1),i[c].toDisplayValue(r[l].value),r[l].toDisplayValue(u),n=0;break}a.sort(function(){return Math.random()-.5});for(var s=0;s<e.length;s++)if(1==n)i[s].toDisplayValue(a[s]);else if(0==n){if(i[s].value==r[0].value||i[s].value==r[l].value)continue;i[s].toDisplayValue(a.pop())}}else{var p=r[0].position.floor,d=r[0].position.col,g=r[0].position.row;this.floorMap[p][d][g]=0,this.changeX_Y(r[0])}},i.prototype.changeX_Y=function(t){t.x<100&&(t.x+=100,t.y+=5),t.x>500&&(t.x-=100,t.y+=5),t.y<310&&(t.y+=100,t.x-=5),t.y>670&&(t.y-=100,t.x-=5)},i.prototype.clearTip=function(){for(var t=0;t<this.majMap.length;t++)this.majMap[t].bLight=!1},i.prototype.progressBar=function(){var t=(this._totalCount-this._recentCount)/this._totalCount;if(1==t){this.topUI.sun_img.alpha=1;var e=new GameOver(this);e.result.source="mj_over_victory_png",main.addChild(e),main.setChildIndex(e,600),this.alpha=.7,this.touchEnabled=!1,this.touchChildren=!1}this.topUI.progress_bar.width=Math.ceil(343*t),this.topUI.headImg.x=this.topUI.progress_bar.width+208},i.prototype.deadFlash=function(){t.isDead(this.majMap)&&this.reflash(this.valueVec,this.majMap)},i}(egret.DisplayObjectContainer);t.TableView=e,__reflect(e.prototype,"mj.TableView",["mj.ITableView"])}(mj||(mj={}));var GameOver=function(t){function e(e){var i=t.call(this)||this;return i.skinName="MJ_GameOver",i.back.touchEnabled=!0,i["continue"].touchEnabled=!0,i._view=e,i.back.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onBack,i),i["continue"].addEventListener(egret.TouchEvent.TOUCH_TAP,i.onNext,i),i}return __extends(e,t),e.prototype.onBack=function(){clearInterval(this._view.topUI.timer),this._view.parent.removeChild(this._view),this.parent.removeChild(this),main.toHall()},e.prototype.onNext=function(){clearInterval(this._view.topUI.timer),this._view.parent.removeChild(this._view),this.parent.removeChild(this),main.readyView()},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.Component);__reflect(GameOver.prototype,"GameOver",["eui.UIComponent","egret.DisplayObject"]);var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.x=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var TableView=mj.TableView,DataEntry=mj.DataEntry,MahRule=mj.MahLogic,Hall=mj.HallView,ReadyView=mj.ReadyView,C_TABLE_STYLE=mj.C_TABLE_STYLE,main,Main_round=1,Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload"),RES.loadGroup("hall"),RES.loadGroup("over")},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.stage.removeChild(this.loadingView),this.createScene())},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.startCreateScene=function(){this.width=C_TABLE_STYLE.width,this.height=C_TABLE_STYLE.height,this.x=C_TABLE_STYLE.x,this.y=C_TABLE_STYLE.y,main=this,this.toHall()},e.prototype.toHall=function(){this.initBackground();var t=new Hall;this.addChild(t)},e.prototype.initBackground=function(){this._bg=new eui.Image,this._bg.width=mj.C_TABLE_STYLE.width,this._bg.height=mj.C_TABLE_STYLE.height,this.addChild(this._bg),this._bg.source="mj_bg_png",this._bg.touchEnabled=!1},e.prototype.readyView=function(){var t=new ReadyView;this.addChild(t)},e.prototype.addToStage=function(){var t=new TableView,e=new DataEntry,i=new MahRule;this.addChild,e.init(t),i.init(t),t.init(e,i),this.addChild(t),e.onStart()},e}(eui.UILayer);__reflect(Main.prototype,"Main");var mj;!function(t){var e=RES.getRes;t.C_MJ_STYLE={width:50,height:60},t.C_MJ_POSITION={offsetX:t.C_MJ_STYLE.width/2,offsetY:t.C_MJ_STYLE.height/2,offX:5,offY:5};var i="mj_geme_mj_%d_png",o=function(t){function o(){var e=t.call(this)||this;return e.touchEnabled=!0,e.touchChildren=!1,e.position={row:null,col:null,floor:null},e}return __extends(o,t),Object.defineProperty(o.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bLight",{get:function(){return this._bLight},set:function(t){this._bLight=t,this._light.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bMask",{get:function(){return this._bMask},set:function(t){this._bMask=t,this._mask.visible=t,this.touchEnabled=!t},enumerable:!0,configurable:!0}),o.prototype.init=function(t,e){this.position=t,this._mj=new egret.Bitmap,this.width=e.width,this.height=e.height,this.anchorOffsetY=this.height/2,this.anchorOffsetX=this.width/2,this.initMahjong(),this.initLight(),this.initMask()},o.prototype.initMahjong=function(){var t=e("mj_Bg_mahjong_png");this.bg=new egret.Bitmap(t),this.addChild(this.bg),this.bg.width=this.width,this.bg.height=this.height,this._mj.width=this.width,this._mj.height=this.height,this._mj.x=.05*this.width,this._mj.y=-1,this.addChild(this._mj)},o.prototype.initLight=function(){var t=e("mj_light_png");this._light=new egret.Bitmap(t),this._light.width=.9*this.width,this._light.height=.95*this.height,this._light.x=.09*this.width,this._light.y=0,this._light.alpha=.7,this.addChild(this._light),this._light.visible=!1},o.prototype.initMask=function(){var t=e("mj_black_png");this._mask=new egret.Bitmap(t),this._mask.width=.9*this.width,this._mask.height=.95*this.height,this._mask.x=.09*this.width,this._mask.y=0,this._mask.alpha=.8,this.addChild(this._mask),this._mask.visible=!1},o.prototype.toSourceId=function(t){var e=t.toString(16).toUpperCase();return 3==e.length?e.substr(1):1==e.length?e="0"+e:e},o.prototype.toDisplayValue=function(t){this.value=t;var e=i.replace("%d",this.toSourceId(t));this._mj.texture=RES.getRes(e)},o}(egret.DisplayObjectContainer);t.MahjongView=o,__reflect(o.prototype,"mj.MahjongView",["mj.IMahJong"])}(mj||(mj={}));var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,o){function n(t){e.call(o,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(o))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function o(o){e.call(i,o,t)}if(RES.hasRes(t)){var n=RES.getRes(t);n?o(n):RES.getResAsync(t,o,this)}else RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var mj;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.skinName="UIViewSkin",i._groupTop.touchEnabled=!1,i._imgPlayerOne.scaleX=.2,i._imgPlayerOne.scaleY=.2,i._imgPlayerTwo.scaleX=.2,i._imgPlayerTwo.scaleY=.2,i._imgPlayerThree.scaleX=.2,i._imgPlayerThree.scaleY=.2,i._bOpenPlayer=!1,i._tipCount=10,i._flashCount=10,i._strongTipCount=5,i.tip_num.text=""+i._tipCount,i._reflashCount.text=""+i._flashCount,i.strong_tip.text=""+i._strongTipCount,i._view=t,i._stopStatus=!0,i.addWatch(),i}return __extends(i,e),i.prototype.addWatch=function(){this._imgMenu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchStop,this),this._imgBan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBan,this),this._imgEye.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStrongTip,this),this._imgFlash.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchFlash,this),this._imgLight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTip,this)},i.prototype.onTouchStop=function(){this._stopStatus&&clearInterval(this._view.topUI.timer)},i.prototype.onTouchBan=function(){this._bOpenPlayer?this.playClosePlayerUI():this.playOpenPlayerUI()},i.prototype.onTouchFlash=function(){this._view.stopFlash()?alert("请消除提示牌"):this._flashCount>0?(this._view.reflash(this._view.valueVec,this._view.majMap),this._flashCount--,this._reflashCount.text=""+this._flashCount):alert("重置次数已经用完")},i.prototype.onTip=function(){this._tipCount>0?(t.onTip(this._view.valueVec,this._view.majMap,this._view),this._tipCount--,this.tip_num.text=""+this._tipCount):(alert("提示次数已经用完"),t.isDead(this._view.majMap)&&this._view.reflash(this._view.valueVec,this._view.majMap))},i.prototype.onStrongTip=function(){this._strongTipCount>0?(t.onStrongTip(this._view.valueVec,this._view.majMap),this._strongTipCount--,this.strong_tip.text=""+this._strongTipCount):alert("强力提示次数已经用完")},i.prototype.playOpenPlayerUI=function(){return egret.Tween.get(this._imgPlayerOne).to({alpha:1,scaleX:1.2,scaleY:1.2},250).to({scaleX:1,scaleY:1},100),egret.Tween.get(this._imgPlayerTwo).to({alpha:1,scaleX:1.2,scaleY:1.2},250).to({scaleX:1,scaleY:1},100),egret.Tween.get(this._imgPlayerThree).to({alpha:1,scaleX:1.2,scaleY:1.2},250).to({scaleX:1,scaleY:1},100),this._bOpenPlayer=!0,Promise.resolve()
},i.prototype.playClosePlayerUI=function(){return egret.Tween.get(this._imgPlayerOne).to({alpha:0,scaleX:.2,scaleY:.2},250),egret.Tween.get(this._imgPlayerTwo).to({alpha:0,scaleX:.2,scaleY:.2},250),egret.Tween.get(this._imgPlayerThree).to({alpha:0,scaleX:.2,scaleY:.2},250),this._bOpenPlayer=!1,Promise.resolve()},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i}(eui.Component);t.UIBottom=e,__reflect(e.prototype,"mj.UIBottom",["eui.UIComponent","egret.DisplayObject"])}(mj||(mj={}));var mj;!function(t){t.TIME={1:180,2:280,3:350};var e=function(e){function i(i){var o=e.call(this)||this;return o.time=t.TIME[Main_round],o.timeFunc(),o.skinName="resource/eui_skins/MJ_UITop.exml",o._view=i,o.next.touchEnabled=!0,o.btn_back.touchEnabled=!0,o.next.addEventListener(egret.TouchEvent.TOUCH_TAP,o.onNext,o),o.btn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,o.onBack,o),o}return __extends(i,e),i.prototype.onNext=function(){Main_round++,this._view.floorLength=0,clearInterval(this.timer),this._view.parent.removeChild(this._view),main.addToStage()},i.prototype.onBack=function(){clearInterval(this.timer),this.next.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onNext,this),this.btn_back.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this),main.toHall()},i.prototype.timeFunc=function(){var t=this;this.timer=setInterval(function(){if(t.time>0)t._clockLabel.text=""+t.time;else{clearInterval(t.timer);var e=new GameOver(t._view);main.addChild(e),main.setChildIndex(e,600),t._view.alpha=.7,t._view.touchEnabled=!1,t._view.touchChildren=!1,t.remListener()}t.time--},1e3)},i.prototype.remListener=function(){this.next.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onNext,this),this.btn_back.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this)},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i}(eui.Component);t.UITop=e,__reflect(e.prototype,"mj.UITop")}(mj||(mj={}));